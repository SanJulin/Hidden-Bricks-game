var c=Object.defineProperty;var d=(i,e,t)=>e in i?c(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var n=(i,e,t)=>d(i,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&s(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function s(r){if(r.ep)return;r.ep=!0;const o=t(r);fetch(r.href,o)}})();class l{constructor(e,t,s){n(this,"id",0);n(this,"name","");n(this,"color","");n(this,"image");this.id=e,this.name=t,s&&this.setImage(s)}getName(){return this.name}getId(){return this.id}getColor(){return this.color}setColor(e){if(e==="green"||e==="yellow"||e==="red")this.color=e;else throw new Error("Only green, yellow and red are valid colors")}getImage(){if(this.image)return this.image}setImage(e){const t=document.createElement("img");t.setAttribute("src",e),t.setAttribute("alt",this.name),this.image=t}}class g{constructor(e,t){n(this,"numberOfItems",5);n(this,"theme");n(this,"optionArray",[]);n(this,"playerGuessRow");n(this,"optionRow");this.numberOfItems=e,this.theme=t,this.optionArray=this.theme.getItemArray(),this.playerGuessRow=document.getElementById("player-guess-row"),this.optionRow=document.getElementById("option-row"),this.dragstartHandler=this.dragstartHandler.bind(this),this.dragoverHandler=this.dragoverHandler.bind(this),this.dropHandler=this.dropHandler.bind(this),this.createGameBoard()}createGameBoard(){this.createPlayerGuessRow(),this.createOptionRow(),this.createClearAllButton(),this.createClearWrongButton()}createPlayerGuessRow(){for(let e=0;e<this.numberOfItems;e++){const t=document.createElement("div");t.className="guess",t.id=`guess${e+1}`,t.addEventListener("dragover",this.dragoverHandler),t.addEventListener("drop",this.dropHandler),this.playerGuessRow.appendChild(t)}}createOptionRow(){for(let e=0;e<this.optionArray.length;e++){const t=document.createElement("div");t.className="option",t.id=`option${this.optionArray[e].getId()}`,t.textContent=this.optionArray[e].getName();const s=this.optionArray[e].getImage();s&&t.appendChild(s),t.setAttribute("draggable","true"),t.addEventListener("dragstart",this.dragstartHandler),this.optionRow.appendChild(t)}}createClearAllButton(){const e=document.createElement("button");e.textContent="clear all",e.addEventListener("click",t=>{t.preventDefault(),this.clearGuesses("all")}),this.playerGuessRow.appendChild(e)}createClearWrongButton(){const e=document.createElement("button");e.textContent="clear wrong guesses",e.addEventListener("click",t=>{t.preventDefault(),this.clearGuesses("wrong")}),this.playerGuessRow.appendChild(e)}updatePlayerGuessItem(e,t){const s=t;e.appendChild(s)}dragstartHandler(e){var t;e.target instanceof HTMLElement&&((t=e.dataTransfer)==null||t.setData("text/plain",e.target.id))}dragoverHandler(e){e.preventDefault(),e.dataTransfer.dropEffect="copy"}dropHandler(e){e.preventDefault();const t=e.dataTransfer.getData("text/plain"),s=document.getElementById(t),r=s==null?void 0:s.cloneNode(!0);r&&e.target instanceof HTMLElement&&e.target.children.length===0&&e.target.appendChild(r)}clearGuesses(e){for(let t=0;t<this.playerGuessRow.children.length;t++){const s=this.playerGuessRow.children[t],r=this.playerGuessRow.children[t].firstElementChild;s&&r&&(e==="wrong"&&s.style.borderColor!=="green"||e==="all")&&(s.removeChild(r),s.style.border="3px solid black")}}getPlayerAnswer(){var t;let e=[];for(let s=0;s<this.numberOfItems;s++){const r=(t=this.playerGuessRow.children[s].firstElementChild)==null?void 0:t.textContent,o=new l(s,r);e.push(o)}return e}updateBorderColors(e,t){const s=this.playerGuessRow.children[e];s.style.border="10px solid "+t}}class u{constructor(e){n(this,"theme","");n(this,"themeArray",[]);n(this,"itemArray",[]);n(this,"availableThemes",["flags","animals","colors","professions","movies"]);e?this.setTheme(e):this.theme=""}getTheme(){if(this.theme)throw new Error("No theme has been set for the game");return this.theme}setTheme(e){this.theme=e,this.theme&&this.setThemeArray()}getAvailableThemes(){return this.availableThemes}getItemArray(){try{return this.itemArray}catch(e){return console.log(e),[]}}getThemeArray(){try{return this.themeArray}catch(e){return console.log(e),[]}}setOtherTheme(e,t){if(t.length!==8)throw Error("The themeArray must contain 8 items.");if(e==="")throw Error('Pls provide a theme "name" for the game');this.theme=e,this.themeArray=t,this.createItemArray()}setThemeArray(){if(this.theme)this.theme==="flags"&&(this.themeArray=["Sweden","Japan","Italy","New Zealand","Kenya","China","Brazil","United Kingdom"]),this.theme==="animals"&&(this.themeArray=["Bear","Crocodile","Elefant","Giraff","Gorilla","Tiger","Whale","Zebra"]),this.theme==="colors"&&(this.themeArray=["Black","Blue","Green","Pink","Purple","Red","Turquoise","Yellow"]),this.theme==="professions"&&(this.themeArray=["Actor","Chef","Developer","Doctor","Fireman","Pilot","Police","Teacher"]),this.theme==="movies"&&(this.themeArray=["Alive","Casablanca","Leon","Lord of the rings","Matrix","Pulp fiction","The shawshank redemption","Titanic"]);else throw new Error("There is no theme set for the game");this.createItemArray()}createItemArray(){if(this.themeArray)for(let e=0;e<this.themeArray.length;e++){const t=`../img/${this.theme}/${this.themeArray[e]}.jpg`,s=new l(e+1,this.themeArray[e],t);this.itemArray.push(s)}else throw Error("There is no themeArray set for the game")}}class p{constructor(e,t){n(this,"numberOfItems",0);n(this,"computerRow",[]);n(this,"themeArray",[]);this.setNumberOfItems(e),this.getThemeArray(t)}getNumberOfItems(){if(this.numberOfItems===null)throw new Error("Number of items has not been set for the game");return this.numberOfItems}setNumberOfItems(e){if(e<1||e>8)throw new Error("Pls provide a number between 1 - 8");this.numberOfItems=e}getThemeArray(e){const t=new u(e);this.themeArray=t.getThemeArray()}generateRow(){const e=this.numberOfItems;for(let t=0;t<e;t++){const s=Math.floor(Math.random()*this.themeArray.length),r=this.themeArray[s];this.computerRow.push(r)}return this.computerRow}}class f{constructor(e,t){n(this,"computerRow",[]);n(this,"numberOfGuesses",0);this.createComputerRow(e,t)}createComputerRow(e,t){const s=new p(e,t);this.computerRow=s.generateRow()}getComputerRow(){if(this.computerRow===void 0)throw new Error("The computer row has not been created yet");return this.computerRow}getNumberOfGuesses(){return this.numberOfGuesses}checkAnswer(e){if(e.length!==this.computerRow.length)throw new Error(`The guess must contain ${this.computerRow.length} items.`);const t=this.addColorsToItems(e);return this.updateNumberOfGuesses(),t}addColorsToItems(e){for(let t=0;t<e.length;t++)e[t].getName()===this.computerRow[t]?e[t].setColor("green"):this.computerRow.includes(e[t].getName())?e[t].setColor("yellow"):e[t].setColor("red");return e}updateNumberOfGuesses(){this.numberOfGuesses++}}class w{constructor(){n(this,"textMessage");n(this,"userMessageElement");n(this,"resultText");n(this,"numberOfGuessesElement");this.textMessage=document.getElementById("text-message"),this.userMessageElement=document.getElementById("user-message-element"),this.resultText=document.getElementById("result-element"),this.numberOfGuessesElement=document.getElementById("number-of-guesses")}getUsername(){return new Promise(e=>{const t=document.createElement("input"),s=document.createElement("button");s.textContent="Submit",this.textMessage.textContent="Welcome! Enter your username and click on submit to begin!",this.userMessageElement.appendChild(s),this.userMessageElement.appendChild(t),s.addEventListener("click",()=>{const r=t.value;this.textMessage.textContent="",t.style.display="none",s.removeEventListener,s.style.display="none",e(r)})})}getChoosenTheme(e){return new Promise(t=>{this.textMessage.textContent="Choose a theme for the game!";let s=[];for(let r=0;r<e.length;r++){const o=document.createElement("button");o.textContent=`${e[r]}`,s.push(o),this.userMessageElement.appendChild(o),o.addEventListener("click",a=>{const h=o.textContent;for(let m=0;m<s.length;m++)s[m].remove();h&&t(h)})}})}getNumberOfItems(){return new Promise(e=>{this.textMessage.textContent="How many bricks would you like to play with? Choose a number between 2 and 8.";const t=document.createElement("input");this.userMessageElement.appendChild(t);const s=document.createElement("button");s.textContent="start game",this.userMessageElement.appendChild(s),s.addEventListener("click",r=>{if(t.value){const o=parseInt(t.value);s.style.display="none",t.style.display="none",this.textMessage.textContent="",e(o)}})})}showUserInstructions(e){this.textMessage.textContent=`Guess which ${e} items that should be in the computer row by dropping the pictures in the above row and click on check answer!`}showMessage(e){this.resultText.textContent=e}showNumberOfGuesses(e,t){this.numberOfGuessesElement.textContent=`Player ${t} has guessed 
${e==null?void 0:e.toString()} times.`}}class y{constructor(){n(this,"themeDescription","");n(this,"themeObject");n(this,"gameBoard");n(this,"answerButton");n(this,"numberOfItems");n(this,"gameUi");n(this,"username");n(this,"computer");this.gameUi=new w,this.themeObject=new u,this.answerButton=document.getElementById("answer-button"),this.start()}async start(){this.username=await this.gameUi.getUsername();const e=this.themeObject.getAvailableThemes();this.themeDescription=await this.gameUi.getChoosenTheme(e),this.numberOfItems=await this.gameUi.getNumberOfItems(),this.createGame()}createGame(){this.numberOfItems&&this.themeDescription&&(this.themeObject.setTheme(this.themeDescription),this.computer=new f(this.numberOfItems,this.themeDescription),this.gameBoard=new g(this.numberOfItems,this.themeObject),this.gameUi.showUserInstructions(this.numberOfItems),this.addAnswerButton())}addAnswerButton(){this.answerButton.textContent="check answer",this.answerButton.style.display="block",this.answerButton.addEventListener("click",e=>{this.checkAnswer()})}async checkAnswer(){if(this.gameBoard){const e=this.gameBoard.getPlayerAnswer();if(this.computer){const t=this.computer.checkAnswer(e);let s=0;for(let o=0;o<t.length;o++){const a=o,h=t[o].getColor();h==="green"&&s++,this.gameBoard.updateBorderColors(a,h)}let r="";s===this.numberOfItems?r="Congratulations! You made it!":r=`Wrong answer! Take a look at the frame colors and try again 
               green = correct, yellow = wrong place, red = not in row`,this.gameUi.showMessage(r),this.updateNumberOfGuesses()}}}updateNumberOfGuesses(){var t;const e=(t=this.computer)==null?void 0:t.getNumberOfGuesses();this.gameUi.showNumberOfGuesses(e,this.username)}}new y;
